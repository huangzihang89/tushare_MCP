# Tushare MCP æ™ºèƒ½è‚¡ç¥¨æ•°æ®åŠ©æ‰‹

<div align="center">

**åŸºäº Model Context Protocol (MCP) çš„ A è‚¡æ•°æ®æŸ¥è¯¢æœåŠ¡**

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python Version](https://img.shields.io/badge/python-3.8%2B-blue)](https://www.python.org/downloads/)

é€šè¿‡è‡ªç„¶è¯­è¨€å¯¹è¯è·å–ä¸­å›½è‚¡å¸‚æ•°æ®ï¼Œæ”¯æŒ Claude Desktopã€Cursor ç­‰ AI å·¥å…·

</div>

---

## âš ï¸ é‡è¦è¯´æ˜

æœ¬é¡¹ç›®ä½¿ç”¨ **[tinyshare](https://github.com/yourusername/tinyshare)** SDK ä½œä¸ºæ•°æ®æºï¼Œ**è€Œéå®˜æ–¹ tushare SDK**ã€‚

### tinyshare vs tushare

| ç‰¹æ€§ | tinyshare | tushareï¼ˆå®˜æ–¹ï¼‰ |
|------|-----------|----------------|
| Token æ¥æº | tinyshare è‡ªå®šä¹‰ Token | Tushare Pro Token |
| å®‰è£…åŒ…å | `pip install tinyshare` | `pip install tushare` |
| å¯¼å…¥æ–¹å¼ | `import tinyshare as ts` | `import tushare as ts` |
| Token é…ç½® | `ts.set_token()` | `ts.set_token()` |
| æ•°æ®æ¥å£ | å…¼å®¹ tushare API | å®˜æ–¹ API |

### å¦‚æœä½ æƒ³ä½¿ç”¨å®˜æ–¹ tushare

éœ€è¦ä¿®æ”¹ `server.py` ç¬¬ 5 è¡Œï¼š

```python
# å½“å‰ä»£ç ï¼ˆä½¿ç”¨ tinyshareï¼‰
import tinyshare as ts

# ä¿®æ”¹ä¸ºï¼ˆä½¿ç”¨å®˜æ–¹ tushareï¼‰
import tushare as ts
```

ç„¶ååœ¨ `requirements.txt` ä¸­å°† `tinyshare` æ›¿æ¢ä¸º `tushare`ï¼š

```bash
# å¸è½½ tinyshare
pip uninstall tinyshare

# å®‰è£…å®˜æ–¹ tushare
pip install tushare

# è·å– Token: https://tushare.pro/user/token
```

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

Tushare MCP æ˜¯ä¸€ä¸ªæ™ºèƒ½è‚¡ç¥¨æ•°æ®æŸ¥è¯¢æœåŠ¡ï¼Œå®ƒå°†é‡‘èæ•°æ® API åŒ…è£…æˆ MCPï¼ˆModel Context Protocolï¼‰å·¥å…·ï¼Œè®©ä½ å¯ä»¥é€šè¿‡ AI åŠ©æ‰‹ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢è‚¡ç¥¨æ•°æ®ã€‚

**æ ¸å¿ƒç‰¹ç‚¹ï¼š**
- ğŸ¤– **AI å‹å¥½**ï¼šé€šè¿‡ Claudeã€Cursor ç­‰å·¥å…·ç”¨å¯¹è¯æ–¹å¼æŸ¥è¯¢è‚¡ç¥¨æ•°æ®
- ğŸ“Š **æ•°æ®å…¨é¢**ï¼šè¦†ç›– A è‚¡ã€æ¸¯è‚¡ã€æŒ‡æ•°çš„è¡Œæƒ…ã€è´¢æŠ¥ã€è‚¡ä¸œç­‰ 30+ ç§æ•°æ®
- ğŸ”’ **å®‰å…¨å¯é **ï¼šToken æœ¬åœ°å­˜å‚¨ï¼Œæ”¯æŒ Docker éƒ¨ç½²
- ğŸš€ **å³æ’å³ç”¨**ï¼šä¸€æ¡å‘½ä»¤å¯åŠ¨ï¼Œæ— éœ€å¤æ‚é…ç½®

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1ï¸âƒ£ è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
- æŸ¥è¯¢ A è‚¡ã€æ¸¯è‚¡çš„åŸºæœ¬ä¿¡æ¯ï¼ˆä»£ç ã€åç§°ã€è¡Œä¸šã€ä¸Šå¸‚æ—¥æœŸç­‰ï¼‰
- æ”¯æŒæ¨¡ç³Šæœç´¢ï¼šè¾“å…¥å…³é”®è¯å¿«é€Ÿæ‰¾åˆ°ç›®æ ‡è‚¡ç¥¨

**ç¤ºä¾‹é—®é¢˜ï¼š**
> "æŸ¥è¯¢å¹³å®‰é“¶è¡Œçš„åŸºæœ¬ä¿¡æ¯"
> "æœç´¢åç§°åŒ…å«'æ–°èƒ½æº'çš„è‚¡ç¥¨"

---

### 2ï¸âƒ£ å®æ—¶è¡Œæƒ…ä¸å†å²æ•°æ®
- è·å–æŒ‡å®šæ—¥æœŸçš„å¼€ç›˜ä»·ã€æ”¶ç›˜ä»·ã€æœ€é«˜ä»·ã€æœ€ä½ä»·
- æŸ¥è¯¢æˆäº¤é‡ã€æ¢æ‰‹ç‡ã€å¸‚ç›ˆç‡(PE)ã€å¸‚å‡€ç‡(PB)
- è®¡ç®—æŒ‡å®šæ—¶é—´æ®µçš„æ¶¨è·Œå¹…

**ç¤ºä¾‹é—®é¢˜ï¼š**
> "å¹³å®‰é“¶è¡Œä»Šå¤©çš„æ”¶ç›˜ä»·æ˜¯å¤šå°‘ï¼Ÿ"
> "æŸ¥è¯¢èŒ…å° 2024 å¹´ 1 æœˆåˆ° 3 æœˆçš„è‚¡ä»·èµ°åŠ¿"
> "è®¡ç®—å®å¾·æ—¶ä»£ä» 9 æœˆ 1 æ—¥åˆ° 9 æœˆ 30 æ—¥çš„æ¶¨è·Œå¹…"

---

### 3ï¸âƒ£ è´¢åŠ¡æŠ¥è¡¨æ·±åº¦æŸ¥è¯¢
- **åˆ©æ¶¦è¡¨**ï¼šè¥ä¸šæ”¶å…¥ã€å‡€åˆ©æ¶¦ã€ç ”å‘è´¹ç”¨ã€åŒæ¯”å¢é•¿ç‡ç­‰
- **èµ„äº§è´Ÿå€ºè¡¨**ï¼šæ€»èµ„äº§ã€è´Ÿå€ºã€è‚¡ä¸œæƒç›Šã€è´§å¸èµ„é‡‘ç­‰
- **ç°é‡‘æµé‡è¡¨**ï¼šç»è¥/æŠ•èµ„/ç­¹èµ„æ´»åŠ¨ç°é‡‘æµ
- **è´¢åŠ¡æŒ‡æ ‡**ï¼šROEã€æ¯›åˆ©ç‡ã€èµ„äº§è´Ÿå€ºç‡ã€æ¯è‚¡æ”¶ç›Šç­‰

**ç¤ºä¾‹é—®é¢˜ï¼š**
> "æŸ¥è¯¢æ¯”äºšè¿ª 2024 å¹´ä¸‰å­£æŠ¥çš„åˆ©æ¶¦è¡¨"
> "è·å–å®å¾·æ—¶ä»£ 2023 å¹´æœ«çš„èµ„äº§è´Ÿå€ºè¡¨"
> "å¹³å®‰é“¶è¡Œæœ€è¿‘ä¸€æœŸçš„ ROE æ˜¯å¤šå°‘ï¼Ÿ"

---

### 4ï¸âƒ£ è‚¡ä¸œä¸å…¬å¸æ²»ç†
- æŸ¥è¯¢è‚¡ä¸œæˆ·æ•°å˜åŒ–
- è·å–å‰åå¤§è‚¡ä¸œ/å‰åå¤§æµé€šè‚¡ä¸œæŒä»“
- æŸ¥çœ‹è‚¡æƒè´¨æŠ¼æƒ…å†µ

**ç¤ºä¾‹é—®é¢˜ï¼š**
> "æŸ¥è¯¢è´µå·èŒ…å° 2024 å¹´ 9 æœˆ 30 æ—¥çš„è‚¡ä¸œæˆ·æ•°"
> "è·å–å®å¾·æ—¶ä»£æœ€æ–°çš„å‰åå¤§è‚¡ä¸œ"
> "æŸ¥è¯¢æŸæŸå…¬å¸çš„è‚¡æƒè´¨æŠ¼æƒ…å†µ"

---

### 5ï¸âƒ£ æŒ‡æ•°ä¸æ¿å—æ•°æ®
- æœç´¢æŒ‡æ•°ï¼ˆæ²ªæ·± 300ã€ä¸Šè¯ 50ã€åˆ›ä¸šæ¿æŒ‡ç­‰ï¼‰
- è·å–æŒ‡æ•°æˆåˆ†è‚¡åŠæƒé‡
- æŸ¥è¯¢å›½é™…æŒ‡æ•°è¡Œæƒ…ï¼ˆå¯Œæ—¶ A50ã€æ’ç”ŸæŒ‡æ•°ç­‰ï¼‰

**ç¤ºä¾‹é—®é¢˜ï¼š**
> "æŸ¥è¯¢æ²ªæ·± 300 æŒ‡æ•°çš„æˆåˆ†è‚¡"
> "è·å–å¯Œæ—¶ä¸­å›½ A50 æŒ‡æ•°ä»Šå¤©çš„æ¶¨è·Œå¹…"
> "æœç´¢åç§°åŒ…å«'äººå·¥æ™ºèƒ½'çš„æŒ‡æ•°"

---

### 6ï¸âƒ£ ç‰¹è‰²æ•°æ®
- **é¾™è™æ¦œ**ï¼šæ¯æ—¥å¤§é¢äº¤æ˜“æ˜ç»†ã€æœºæ„å¸­ä½æ•°æ®
- **äº¤æ˜“æ—¥å†**ï¼šæŸ¥è¯¢æŒ‡å®šæ—¥æœŸèŒƒå›´çš„äº¤æ˜“æ—¥
- **ä¸»è¥ä¸šåŠ¡æ„æˆ**ï¼šæŒ‰äº§å“/åœ°åŒº/è¡Œä¸šçš„æ”¶å…¥å æ¯”
- **è´¢åŠ¡å®¡è®¡æ„è§**ï¼šå®¡è®¡ç»“æœã€ä¼šè®¡å¸ˆäº‹åŠ¡æ‰€ä¿¡æ¯

**ç¤ºä¾‹é—®é¢˜ï¼š**
> "æŸ¥è¯¢ 2024 å¹´ 10 æœˆ 15 æ—¥çš„é¾™è™æ¦œæ•°æ®"
> "è·å– 2024 å¹´ 11 æœˆçš„æ‰€æœ‰äº¤æ˜“æ—¥"
> "æŸ¥è¯¢æ¯”äºšè¿ªçš„ä¸»è¥ä¸šåŠ¡æ”¶å…¥æ„æˆ"

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

1. **Python 3.8+**ï¼ˆmacOS ç”¨æˆ·æ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼‰
2. **tinyshare Token** æˆ– **Tushare Pro Token**ï¼ˆè§ä¸Šæ–¹"é‡è¦è¯´æ˜"ï¼‰

---

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/your-username/tushare-mcp.git
cd tushare-mcp
```

#### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆmacOS å¿…éœ€ï¼‰
```bash
python3 -m venv venv
source venv/bin/activate
```

#### 3. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

> **æ³¨æ„**ï¼š`requirements.txt` ä¸­åŒ…å« `tinyshare`ã€‚å¦‚æœä½ è¦ä½¿ç”¨å®˜æ–¹ tushareï¼Œè¯·å…ˆç¼–è¾‘ `requirements.txt` å’Œ `server.py`ï¼ˆè§ä¸Šæ–¹è¯´æ˜ï¼‰ã€‚

---

### é…ç½® Token

**æ–¹å¼ 1ï¼šé¦–æ¬¡å¯åŠ¨æ—¶é…ç½®ï¼ˆæ¨èï¼‰**

ç›´æ¥å¯åŠ¨æœåŠ¡ï¼ŒToken ä¼šåœ¨é¦–æ¬¡ä½¿ç”¨å·¥å…·æ—¶è‡ªåŠ¨ä¿å­˜åˆ° `~/.tushare_mcp/.env`ï¼š

```bash
python server.py
```

ç„¶ååœ¨ AI åŠ©æ‰‹ä¸­è°ƒç”¨ `setup_tushare_token` å·¥å…·å¹¶è¾“å…¥ä½ çš„ Tokenã€‚

**æ–¹å¼ 2ï¼šæ‰‹åŠ¨åˆ›å»ºé…ç½®æ–‡ä»¶**

åœ¨ `~/.tushare_mcp/` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
mkdir -p ~/.tushare_mcp
echo "TUSHARE_TOKEN=ä½ çš„Token" > ~/.tushare_mcp/.env
```

> **Token è¯´æ˜**ï¼š
> - ä½¿ç”¨ tinyshareï¼šå¡«å†™ tinyshare æä¾›çš„ Token
> - ä½¿ç”¨å®˜æ–¹ tushareï¼šå‰å¾€ [Tushare Pro](https://tushare.pro/user/token) è·å–

---

### å¯åŠ¨æœåŠ¡

```bash
python server.py
```

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¯´æ˜å¯åŠ¨æˆåŠŸï¼š
```
INFO:     Started server process [xxxxx]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
```

æœåŠ¡å¯åŠ¨åå¯è®¿é—®ï¼š
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/
- **API æ–‡æ¡£**: http://localhost:8000/docs
- **MCP ç«¯ç‚¹**: http://localhost:8000/sse

---

## ğŸ”§ ä½¿ç”¨æ–¹å¼

### æ–¹å¼ 1ï¼šåœ¨ Claude Desktop ä¸­ä½¿ç”¨

ç¼–è¾‘ Claude Desktop é…ç½®æ–‡ä»¶ï¼š

**macOS:** `~/Library/Application Support/Claude/claude_desktop_config.json`

```json
{
  "mcpServers": {
    "tushare": {
      "url": "http://localhost:8000/sse"
    }
  }
}
```

é‡å¯ Claude Desktopï¼Œåœ¨å¯¹è¯ä¸­å°±å¯ä»¥ç›´æ¥æé—®ï¼š

> "æŸ¥è¯¢å¹³å®‰é“¶è¡Œçš„è‚¡ä»·"
> "å¸®æˆ‘åˆ†ææ¯”äºšè¿ªæœ€æ–°çš„è´¢æŠ¥æ•°æ®"

---

### æ–¹å¼ 2ï¼šåœ¨ Cursor ä¸­ä½¿ç”¨

1. æ‰“å¼€ Cursor è®¾ç½®ï¼ˆ`Cmd/Ctrl + ,`ï¼‰
2. æœç´¢ "MCP Servers"
3. æ·»åŠ æ–°æœåŠ¡å™¨ï¼š
   ```
   åç§°: tushare
   URL: http://localhost:8000/sse
   ```
4. ä¿å­˜å¹¶é‡å¯ Cursor

---

### æ–¹å¼ 3ï¼šé€šè¿‡ HTTP API ç›´æ¥è°ƒç”¨

æœåŠ¡åŒæ—¶æä¾›æ ‡å‡†çš„ HTTP API æ¥å£ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æ¥å£ï¼ˆæµè§ˆå™¨è®¿é—®æ›´å‹å¥½ï¼‰
curl http://localhost:8000/docs

# é…ç½® Token
curl -X POST http://localhost:8000/tools/setup_tushare_token \
  -H "Content-Type: application/json" \
  -d '{"token": "ä½ çš„Token"}'

# è¿”å›ç¤ºä¾‹
# {"status": "success", "message": "Tokené…ç½®æˆåŠŸï¼æ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨Tushareçš„APIåŠŸèƒ½äº†ã€‚"}
```

---

## ğŸ“‹ å®Œæ•´å·¥å…·åˆ—è¡¨

### Token ç®¡ç†ï¼ˆ2 ä¸ªå·¥å…·ï¼‰
| å·¥å…·åç§° | åŠŸèƒ½è¯´æ˜ |
|----------|----------|
| `setup_tushare_token` | é…ç½® Tokenï¼ˆé¦–æ¬¡ä½¿ç”¨å¿…éœ€ï¼‰ |
| `check_token_status` | æ£€æŸ¥ Token æ˜¯å¦æœ‰æ•ˆ |

### è‚¡ç¥¨åŸºç¡€ä¿¡æ¯ï¼ˆ3 ä¸ªå·¥å…·ï¼‰
| å·¥å…·åç§° | åŠŸèƒ½è¯´æ˜ |
|----------|----------|
| `get_stock_basic_info` | æŸ¥è¯¢ A è‚¡åŸºæœ¬ä¿¡æ¯ï¼ˆä»£ç /åç§°/è¡Œä¸šç­‰ï¼‰ |
| `get_hk_stock_basic` | æŸ¥è¯¢æ¸¯è‚¡åŸºæœ¬ä¿¡æ¯ |
| `search_stocks` | æ¨¡ç³Šæœç´¢è‚¡ç¥¨ï¼ˆæ”¯æŒä»£ç å’Œåç§°ï¼‰ |

### è¡Œæƒ…æ•°æ®ï¼ˆ4 ä¸ªå·¥å…·ï¼‰
| å·¥å…·åç§° | åŠŸèƒ½è¯´æ˜ |
|----------|----------|
| `get_daily_prices` | è·å–æ—¥çº¿è¡Œæƒ…ï¼ˆå¼€é«˜ä½æ”¶ã€æˆäº¤é‡ï¼‰ |
| `get_daily_metrics` | è·å–æ¢æ‰‹ç‡ã€é‡æ¯”ã€PE/PB ç­‰æŒ‡æ ‡ |
| `get_daily_basic_info` | è·å–è‚¡æœ¬ã€å¸‚å€¼æ•°æ® |
| `get_period_price_change` | è®¡ç®—æŒ‡å®šåŒºé—´æ¶¨è·Œå¹… |

### è´¢åŠ¡æ•°æ®ï¼ˆ5 ä¸ªå·¥å…·ï¼‰
| å·¥å…·åç§° | åŠŸèƒ½è¯´æ˜ |
|----------|----------|
| `get_financial_indicator` | æŸ¥è¯¢ç»¼åˆè´¢åŠ¡æŒ‡æ ‡ï¼ˆROE/æ¯›åˆ©ç‡ç­‰ï¼‰ |
| `get_income_statement` | æŸ¥è¯¢åˆ©æ¶¦è¡¨ï¼ˆå«åŒæ¯”å¢é•¿ç‡ï¼‰ |
| `get_balance_sheet` | æŸ¥è¯¢èµ„äº§è´Ÿå€ºè¡¨ |
| `get_cash_flow` | æŸ¥è¯¢ç°é‡‘æµé‡è¡¨ |
| `get_fina_mainbz` | æŸ¥è¯¢ä¸»è¥ä¸šåŠ¡æ„æˆï¼ˆæŒ‰äº§å“/åœ°åŒºï¼‰ |

### è‚¡ä¸œä¿¡æ¯ï¼ˆ2 ä¸ªå·¥å…·ï¼‰
| å·¥å…·åç§° | åŠŸèƒ½è¯´æ˜ |
|----------|----------|
| `get_shareholder_count` | æŸ¥è¯¢è‚¡ä¸œæˆ·æ•° |
| `get_top_holders` | æŸ¥è¯¢å‰åå¤§è‚¡ä¸œ/æµé€šè‚¡ä¸œ |

### æŒ‡æ•°æ•°æ®ï¼ˆ4 ä¸ªå·¥å…·ï¼‰
| å·¥å…·åç§° | åŠŸèƒ½è¯´æ˜ |
|----------|----------|
| `search_index` | æœç´¢æŒ‡æ•°ï¼ˆæ”¯æŒåç§°/å¸‚åœº/å‘å¸ƒæ–¹ï¼‰ |
| `get_index_list` | è·å–æŒ‡æ•°åˆ—è¡¨ï¼ˆå¯æŒ‰æ¡ä»¶ç­›é€‰ï¼‰ |
| `get_index_constituents` | è·å–æŒ‡æ•°æˆåˆ†è‚¡åŠæƒé‡ |
| `get_global_index_quotes` | æŸ¥è¯¢å›½é™…æŒ‡æ•°è¡Œæƒ…ï¼ˆA50/æ’æŒ‡ç­‰ï¼‰ |

### ç‰¹è‰²æ•°æ®ï¼ˆ3 ä¸ªå·¥å…·ï¼‰
| å·¥å…·åç§° | åŠŸèƒ½è¯´æ˜ |
|----------|----------|
| `get_pledge_detail` | æŸ¥è¯¢è‚¡æƒè´¨æŠ¼ç»Ÿè®¡ |
| `get_top_list_detail` | æŸ¥è¯¢é¾™è™æ¦œæ¯æ—¥äº¤æ˜“æ˜ç»† |
| `get_top_institution_detail` | æŸ¥è¯¢é¾™è™æ¦œæœºæ„æˆäº¤æ˜ç»† |

### å·¥å…·ç±»ï¼ˆ2 ä¸ªå·¥å…·ï¼‰
| å·¥å…·åç§° | åŠŸèƒ½è¯´æ˜ |
|----------|----------|
| `get_trade_calendar` | è·å–äº¤æ˜“æ—¥å†ï¼ˆç­›é€‰å¼€ç›˜æ—¥ï¼‰ |
| `get_start_date_for_n_days` | è®¡ç®—å¾€å‰ N ä¸ªäº¤æ˜“æ—¥çš„æ—¥æœŸ |

**å…±è®¡ 25 ä¸ªå·¥å…·** âœ¨

---

## ğŸ” æ•°æ®æ ¼å¼è¯´æ˜

### æ—¥æœŸæ ¼å¼
æ‰€æœ‰æ—¥æœŸä½¿ç”¨ `YYYYMMDD` æ ¼å¼ï¼š
```
20240930  â†’  2024å¹´9æœˆ30æ—¥
20231231  â†’  2023å¹´12æœˆ31æ—¥
```

### è‚¡ç¥¨ä»£ç æ ¼å¼
```
Aè‚¡ï¼ˆæ·±åœ³ï¼‰: 000001.SZ  â†’  å¹³å®‰é“¶è¡Œ
Aè‚¡ï¼ˆä¸Šæµ·ï¼‰: 600000.SH  â†’  æµ¦å‘é“¶è¡Œ
æ¸¯è‚¡:       00700.HK   â†’  è…¾è®¯æ§è‚¡
æŒ‡æ•°:       000300.SH  â†’  æ²ªæ·±300
```

### é‡‘é¢å•ä½
- è´¢åŠ¡æ•°æ®ï¼šè‡ªåŠ¨è½¬æ¢ä¸º **äº¿å…ƒ**ï¼ˆåŸå§‹æ•°æ®å•ä½ä¸ºå…ƒï¼‰
- è‚¡æœ¬æ•°æ®ï¼š**ä¸‡è‚¡**
- å¸‚å€¼æ•°æ®ï¼š**ä¸‡å…ƒ**

---

## ğŸ³ Docker éƒ¨ç½²

### æ„å»ºé•œåƒ
```bash
docker build -t tushare-mcp .
```

### è¿è¡Œå®¹å™¨ï¼ˆä½¿ç”¨ tinyshareï¼‰
```bash
docker run -d \
  -p 8000:8000 \
  -e TUSHARE_TOKEN=ä½ çš„tinyshare_token \
  --name tushare-mcp \
  tushare-mcp
```

### è¿è¡Œå®¹å™¨ï¼ˆä½¿ç”¨å®˜æ–¹ tushareï¼‰
```bash
# 1. å…ˆä¿®æ”¹ Dockerfile æˆ– server.pyï¼ˆå°† tinyshare æ”¹ä¸º tushareï¼‰

# 2. é‡æ–°æ„å»ºé•œåƒ
docker build -t tushare-mcp .

# 3. è¿è¡Œ
docker run -d \
  -p 8000:8000 \
  -e TUSHARE_TOKEN=ä½ çš„tushare_pro_token \
  --name tushare-mcp \
  tushare-mcp
```

### æŸ¥çœ‹æ—¥å¿—
```bash
docker logs -f tushare-mcp
```

### åœæ­¢å’Œåˆ é™¤å®¹å™¨
```bash
docker stop tushare-mcp
docker rm tushare-mcp
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: æç¤º "Token æ— æ•ˆ" æ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥æ¸…å•ï¼š**
1. âœ… ç¡®è®¤ä½¿ç”¨çš„æ˜¯æ­£ç¡®çš„ Tokenï¼ˆtinyshare Token æˆ– Tushare Pro Tokenï¼‰
2. âœ… å¦‚æœä½¿ç”¨ Tushare Proï¼Œç¡®è®¤è´¦å·å·²æ¿€æ´»ï¼ˆç§¯åˆ† â‰¥ 120ï¼‰
3. âœ… Token å‰åæ²¡æœ‰å¤šä½™ç©ºæ ¼
4. âœ… ä½¿ç”¨ `check_token_status` å·¥å…·éªŒè¯

```bash
# æ‰‹åŠ¨æµ‹è¯• Tokenï¼ˆä½¿ç”¨ tinyshareï¼‰
python3 << EOF
import tinyshare as ts
ts.set_token('ä½ çš„Token')
pro = ts.pro_api()
print(pro.stock_basic(ts_code='000001.SZ'))
EOF
```

---

### Q2: æŸ¥è¯¢æŠ¥é”™ "ç§¯åˆ†ä¸è¶³"ï¼Ÿ

**åŸå› **ï¼šéƒ¨åˆ†é«˜çº§æ•°æ®éœ€è¦æ›´é«˜çš„ Tushare ç§¯åˆ†ç­‰çº§ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼ˆä»…é’ˆå¯¹å®˜æ–¹ tushareï¼‰ï¼š
- å®Œæˆæ–°æ‰‹ä»»åŠ¡ï¼ˆ+100 ç§¯åˆ†ï¼‰
- åˆ†äº«æ¥å£æ–‡æ¡£åˆ°ç¤¾äº¤åª’ä½“ï¼ˆ+20 ç§¯åˆ†ï¼‰
- é‚€è¯·å¥½å‹æ³¨å†Œï¼ˆæ¯äºº +50 ç§¯åˆ†ï¼‰
- å‚ä¸ç¤¾åŒºè´¡çŒ®

è¯¦è§ï¼š[Tushare ç§¯åˆ†è·å–æŒ‡å—](https://tushare.pro/document/1?doc_id=13)

**æ³¨æ„**ï¼šå¦‚æœä½¿ç”¨ tinyshareï¼Œè¯·è”ç³» tinyshare æä¾›æ–¹äº†è§£æƒé™è§„åˆ™ã€‚

---

### Q3: æœåŠ¡å¯åŠ¨åæ— æ³•è®¿é—®ï¼Ÿ

```bash
# 1. æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œ
ps aux | grep server.py

# 2. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
lsof -i :8000

# 3. å°è¯•æ›´æ¢ç«¯å£ï¼ˆä¿®æ”¹ server.py ç¬¬ 1873 è¡Œï¼‰
# uvicorn.run(app, host="0.0.0.0", port=8001)

# 4. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼ˆmacOSï¼‰
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate
```

---

### Q4: Docker å®¹å™¨æ— æ³•è¿æ¥ï¼Ÿ

```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps -a

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs tushare-mcp

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it tushare-mcp bash

# æ£€æŸ¥å®¹å™¨å†…æœåŠ¡æ˜¯å¦å¯åŠ¨
docker exec tushare-mcp curl http://localhost:8000/
```

---

### Q5: å¦‚ä½•æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Ÿ

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 2. é‡æ–°å®‰è£…ä¾èµ–ï¼ˆå¦‚æœ‰æ›´æ–°ï¼‰
pip install -r requirements.txt --upgrade

# 3. é‡å¯æœåŠ¡
python server.py
```

---

### Q6: æ•°æ®æ›´æ–°é¢‘ç‡æ˜¯å¤šå°‘ï¼Ÿ

| æ•°æ®ç±»å‹ | æ›´æ–°æ—¶é—´ |
|---------|---------|
| æ—¥çº¿è¡Œæƒ… | äº¤æ˜“æ—¥æ”¶ç›˜å 30 åˆ†é’Ÿ |
| è´¢åŠ¡æŠ¥è¡¨ | å…¬å¸å…¬å‘Šå‘å¸ƒå 1-2 å°æ—¶ |
| é¾™è™æ¦œ | äº¤æ˜“æ—¥æ¬¡æ—¥ä¸Šåˆ 9:00 |
| è‚¡ä¸œæ•°æ® | å­£æŠ¥æŠ«éœ²åæ›´æ–° |

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### âœ… æ”¯æŒçš„æ•°æ®èŒƒå›´
- A è‚¡ã€æ¸¯è‚¡çš„åŸºæœ¬ä¿¡æ¯ä¸è¡Œæƒ…
- è´¢åŠ¡æŠ¥è¡¨ï¼ˆå¹´æŠ¥ã€ä¸­æŠ¥ã€å­£æŠ¥ï¼‰
- è‚¡ä¸œä¿¡æ¯ã€é¾™è™æ¦œæ•°æ®
- ä¸»æµæŒ‡æ•°åŠå›½é™…æŒ‡æ•°

### âŒ ä¸æ”¯æŒçš„æ•°æ®èŒƒå›´
- åˆ†é’Ÿçº¿ã€Tick çº§åˆ«çš„é«˜é¢‘æ•°æ®
- æœŸè´§ã€æœŸæƒã€å€ºåˆ¸ç­‰éè‚¡ç¥¨å“ç§
- å…¬å¸å…¬å‘Šã€ç ”æŠ¥ç­‰æ–‡æœ¬èµ„è®¯
- å®è§‚ç»æµæ•°æ®ï¼ˆGDPã€CPI ç­‰ï¼‰

### âš ï¸ API é™åˆ¶ï¼ˆä»…é’ˆå¯¹å®˜æ–¹ tushareï¼‰
- å…è´¹è´¦æˆ·ï¼š200 æ¬¡/åˆ†é’Ÿ
- é«˜çº§æ¥å£ï¼šéœ€è¦ç§¯åˆ† â‰¥ 2000
- è¯¦è§ï¼š[Tushare æ¥å£æƒé™è¯´æ˜](https://tushare.pro/document/1?doc_id=108)

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨

```bash
# 1. æ£€æŸ¥ Python ç‰ˆæœ¬
python3 --version  # éœ€è¦ >= 3.8

# 2. æ£€æŸ¥ä¾èµ–æ˜¯å¦å®Œæ•´å®‰è£…
pip list | grep -E "tinyshare|fastapi|uvicorn|mcp"

# 3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
python server.py 2>&1 | tee server.log

# 4. æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒæ˜¯å¦æ¿€æ´»
which python3  # åº”è¯¥æ˜¾ç¤º venv è·¯å¾„
```

---

### Token é…ç½®ä¸ç”Ÿæ•ˆ

```bash
# 1. æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
cat ~/.tushare_mcp/.env

# 2. æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la ~/.tushare_mcp/.env

# 3. æ‰‹åŠ¨åˆ›å»ºé…ç½®ï¼ˆç¡®ä¿æ²¡æœ‰å¤šä½™æ¢è¡Œç¬¦ï¼‰
echo -n "TUSHARE_TOKEN=ä½ çš„Token" > ~/.tushare_mcp/.env

# 4. éªŒè¯ Token æ ¼å¼ï¼ˆåº”è¯¥æ˜¯ä¸€ä¸²å­—æ¯+æ•°å­—ï¼‰
cat ~/.tushare_mcp/.env | cut -d'=' -f2 | wc -c  # é•¿åº¦åº”ä¸º 33ï¼ˆ32å­—ç¬¦+æ¢è¡Œï¼‰
```

---

### MCP è¿æ¥å¤±è´¥

```bash
# 1. ç¡®è®¤æœåŠ¡æ­£åœ¨è¿è¡Œ
curl http://localhost:8000/

# 2. æµ‹è¯• SSE ç«¯ç‚¹
curl http://localhost:8000/sse

# 3. æ£€æŸ¥ MCP é…ç½®æ ¼å¼ï¼ˆJSON å¿…é¡»åˆæ³•ï¼‰
cat ~/Library/Application\ Support/Claude/claude_desktop_config.json | python3 -m json.tool

# 4. é‡å¯ AI å®¢æˆ·ç«¯
# - Claude Desktop: å®Œå…¨é€€å‡ºåé‡æ–°æ‰“å¼€
# - Cursor: Cmd+Shift+P â†’ "Reload Window"
```

---

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºï¼Œå…è®¸è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘ã€‚

---

## ğŸ™ è‡´è°¢

- **æ•°æ®æä¾›**ï¼š[tinyshare](https://github.com/yourusername/tinyshare) / [Tushare Pro](https://tushare.pro)
- **åè®®æ¡†æ¶**ï¼š[Anthropic MCP](https://github.com/anthropics/mcp)
- **Web æ¡†æ¶**ï¼š[FastAPI](https://fastapi.tiangolo.com/)

---

## ğŸ“® è”ç³»ä¸æ”¯æŒ

### é‡åˆ°é—®é¢˜ï¼Ÿ

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„ [å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜) ç« èŠ‚
2. æœç´¢ [å·²æœ‰ Issues](https://github.com/your-username/tushare-mcp/issues)
3. æäº¤æ–°çš„ [Issue](https://github.com/your-username/tushare-mcp/issues/new)

### æƒ³è¦è´¡çŒ®ï¼Ÿ

æ¬¢è¿æäº¤ Pull Requestï¼è¯·ç¡®ä¿ï¼š
- ä»£ç é£æ ¼ç»Ÿä¸€ï¼ˆä½¿ç”¨ `black` æ ¼å¼åŒ–ï¼‰
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- æµ‹è¯•é€šè¿‡

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ Star æ”¯æŒï¼**

Made with â¤ï¸ for the community

</div>
